(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-category-category"],{"04e1":function(t,e,a){"use strict";a.r(e);var o=a("f004"),i=a.n(o);for(var n in o)"default"!==n&&function(t){a.d(e,t,(function(){return o[t]}))}(n);e["default"]=i.a},"0caa":function(t,e,a){var o=a("24fb");e=o(!1),e.push([t.i,".header[data-v-0ab0599f]{position:fixed!important;top:0;left:0;right:0;z-index:101}.scroller[data-v-0ab0599f]{position:absolute!important;top:0;left:0;right:0;bottom:0}.banner[data-v-0ab0599f]{\n  /* position: sticky; */position:absolute;top:0;left:0;right:0}.banner-image-wrap[data-v-0ab0599f]{flex-direction:row}.banner-image[data-v-0ab0599f]{flex:1}.banner-mask[data-v-0ab0599f]{position:absolute;top:0;right:0;bottom:0;left:0;background-color:rgba(0,0,0,.28)}.banner-word[data-v-0ab0599f]{position:absolute;justify-content:center;height:80px;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.banner-word-title[data-v-0ab0599f]{text-align:center;font-size:29px;font-weight:700;color:#fff}.banner-word-info[data-v-0ab0599f]{text-align:center;margin-top:12px;font-size:14px;color:#fff}.content-wrap[data-v-0ab0599f]{margin-top:-28px}.content[data-v-0ab0599f]{border-radius:28px}.children[data-v-0ab0599f]{padding-top:38px}.children-scroll-view[data-v-0ab0599f]{flex-direction:row;flex:1}.children-list[data-v-0ab0599f]{flex-direction:row;\n  /* 预留一点滚动条的位置 */padding-bottom:14px}.children-list-item-wrap[data-v-0ab0599f]{padding-left:10px}.children-list-item-first-child[data-v-0ab0599f]{padding-left:28px}.children-list-item-last-child[data-v-0ab0599f]{padding-right:28px}.children-list-item[data-v-0ab0599f]{border-width:2px;border-style:solid;border-radius:12px;height:50px;padding:0 32px;justify-content:center;align-items:center}.children-list-item-text[data-v-0ab0599f]{font-size:13px;font-weight:700}.goods[data-v-0ab0599f]{padding-top:14px}.goods-list[data-v-0ab0599f]{flex-direction:row;flex-wrap:wrap;margin-left:12px}.goods-item[data-v-0ab0599f]{padding-bottom:24px;margin-left:16px}.goods-item-image-wrap[data-v-0ab0599f]{position:relative}.goods-item-image[data-v-0ab0599f]{position:relative;z-index:1;flex:1;\ndisplay:block;width:100%;\nborder-radius:12px}.goods-item-btn-favorite[data-v-0ab0599f]{position:absolute;top:14px;right:14px;z-index:10;justify-content:center;align-items:center;width:28px;height:28px;border-radius:7px;background-color:#fff}.goods-item-btn-favorite-icon[data-v-0ab0599f]{font-size:15px;color:#292929}.goods-item-title[data-v-0ab0599f]{margin-top:20px;font-size:15px;font-weight:700;line-height:20px}.goods-item-price[data-v-0ab0599f]{margin-top:10px;font-size:13px}.loadmore[data-v-0ab0599f]{justify-content:center;align-items:center;height:56px}.loadmore-text[data-v-0ab0599f]{font-size:14px;font-weight:700;color:#fff}",""]),t.exports=e},"239f":function(t,e,a){"use strict";var o=a("be87"),i=a.n(o);i.a},"245e":function(t,e,a){"use strict";a("a9e3"),a("ac1f"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o={name:"em-scroller",props:{scrollTop:{type:Number,default:0}},data:function(){return{}},methods:{scroll:function(t){var e=this;uni.createSelectorQuery().in(this).selectAll(".em-scroller").boundingClientRect((function(a){var o=t.detail.scrollTop,i=Math.floor(t.detail.scrollHeight-o-a[0].height);e.$emit("scroll",{scrollTop:o,scrollBottom:i})})).exec()}}};e.default=o},"2ed1":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return o}));var o={emPage:a("143c").default,emScroller:a("c45c").default,emIcon:a("81d3").default,emHeader:a("86f4").default},i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("em-page",{staticClass:"category",attrs:{"em-styles":t.pageStyles}},[a("v-uni-view",{staticClass:"banner",style:{height:t.systemInfo.windowHeight+"px"}},[a("v-uni-view",{staticClass:"banner-image-wrap"},[a("v-uni-image",{staticClass:"banner-image",style:{height:t.systemInfo.windowHeight+"px"},attrs:{src:t.imageUrl+t.category.icon.file_path,mode:"aspectFill"}})],1),a("v-uni-view",{staticClass:"banner-mask"}),a("v-uni-view",{staticClass:"banner-word",style:{top:"300rpx",left:"375rpx"}},[a("v-uni-text",{staticClass:"banner-word-title"},[t._v(t._s(t.category.name))]),a("v-uni-text",{staticClass:"banner-word-info"},[t._v("500+")])],1)],1),a("em-scroller",{staticClass:"scroller",on:{scroll:function(e){arguments[0]=e=t.$handleEvent(e),t.scroll.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"banner-inset",style:{height:.68*t.systemInfo.windowWidth+t.systemInfo.statusBarHeight-28+"px"}}),a("v-uni-view",{staticClass:"content-wrap"},[a("v-uni-view",{staticClass:"content",style:[t.$em.$getThemeStyle(["bg-color-1"])]},[a("v-uni-view",{staticClass:"goods"},[a("v-uni-view",{staticClass:"goods-list"},t._l(t.products.content,(function(e,o){return a("v-uni-view",{key:o,staticClass:"goods-item",style:[{width:t.systemInfo.windowWidth/2-36+"px"}],on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.$em.$navigateTo("/pages/goods/goods?id="+e.id)}}},[a("v-uni-view",{staticClass:"goods-item-image-wrap",style:{height:.53*t.systemInfo.windowWidth+"px"}},[a("v-uni-image",{staticClass:"goods-item-image",attrs:{src:t.imageUrl+e.images[0].file_path,mode:"aspectFill"}}),a("v-uni-view",{staticClass:"goods-item-btn-favorite"},[a("em-icon",{staticClass:"goods-item-btn-favorite-icon",attrs:{unicode:""}})],1)],1),a("v-uni-view",{staticClass:"goods-item-info"},[a("v-uni-text",{staticClass:"goods-item-title",style:[t.$em.$getThemeStyle(["color-1"])]},[t._v(t._s(e.name))]),a("v-uni-text",{staticClass:"goods-item-price",style:[t.$em.$getThemeStyle(["color-1"])]},[t._v("S$"+t._s(e.price.toFixed(2)))])],1)],1)})),1)],1)],1),a("v-uni-view",{staticClass:"loadmore"},["loadmore"===t.loadmoreState?a("v-uni-text",{staticClass:"loadmore-text"},[t._v("Scroll to load more")]):"loading"===t.loadmoreState?a("v-uni-text",{staticClass:"loadmore-text"},[t._v("Loading...")]):"nomore"===t.loadmoreState?a("v-uni-text",{staticClass:"loadmore-text"},[t._v("No More")]):t._e()],1)],1)],1),a("em-header",{ref:"header",staticClass:"header",attrs:{title:"商品类别","em-styles":t.headerStyles,"left-btns":t.headerLeftBtns},on:{clickBtn:function(e){arguments[0]=e=t.$handleEvent(e),t.clickHeaderBtn.apply(void 0,arguments)}}})],1)},n=[]},"5bbe":function(t,e,a){"use strict";var o;a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return o}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"em-scroller-wrap"},[a("v-uni-scroll-view",{staticClass:"em-scroller",attrs:{"scroll-y":!0,"scroll-top":t.scrollTop},on:{scroll:function(e){arguments[0]=e=t.$handleEvent(e),t.scroll.apply(void 0,arguments)}}},[t._t("default")],2)],1)},n=[]},6163:function(t,e,a){var o=a("24fb");e=o(!1),e.push([t.i,".em-header-wrap[data-v-454d46e3]{position:relative;border-top-left-radius:0;border-top-right-radius:0;border-bottom-left-radius:28px;border-bottom-right-radius:28px\n  /* 当前元素为overflow: hidden;时在iOS上，外层或同级元素如果是overflow: scroll;切换页面再回到页面，未显示的滚动区域的内容或暂时被高层的内容遮挡会出现被隐藏的情况 */\n  /* 这里的阴影样式就会被遮掉一部分 */\n  /* overflow: hidden; */}.em-header[data-v-454d46e3]{\n  /* 在nvue中z-index不起作用，但是position: sticky;层级要比absolute高些，所以这里用这个 */\n  /* position: sticky;在nvue中会透过swiper */\n  /* position: sticky; */\n  /* position: relative;\n  z-index: 999;\n  top: 0;\n  right: 0;\n  left: 0; */padding-top:16px;padding-right:28px;padding-bottom:16px;padding-left:28px;border-top-left-radius:0;border-top-right-radius:0;border-bottom-left-radius:28px;border-bottom-right-radius:28px\n  /* 当前元素为overflow: hidden;时在iOS上，外层或同级元素如果是overflow: scroll;切换页面再回到页面，未显示的滚动区域的内容或暂时被高层的内容遮挡会出现被隐藏的情况 */\n  /* overflow: hidden; */}.em-header-bg-wrap[data-v-454d46e3]{position:absolute;top:0;right:0;bottom:0;left:0;transition-property:opacity;transition-duration:.25s}.em-header-bg[data-v-454d46e3]{position:absolute;top:0;right:0;bottom:0;left:0;\n  /* 这样设置border-radius，会导致iOS nvue opacity失效，又是个离谱的坑，把opacity放到外层去吧，不能放一起 */border-top-left-radius:0;border-top-right-radius:0;border-bottom-left-radius:28px;border-bottom-right-radius:28px;\n  /* transition-property: background-color;transition-duration: 0.25s;不能与box-shadow一起使用，否则box-shadow在安卓nvue无法切换样式，比如动态切换颜色 */transition-property:background-color;transition-duration:.25s}.em-header-content[data-v-454d46e3]{position:relative;flex-direction:row;justify-content:center;align-items:center;height:36px}.em-header-title[data-v-454d46e3]{flex:1;text-align:center;font-size:15px;font-weight:700}.em-header-left[data-v-454d46e3]{position:absolute;left:0;z-index:10;flex-direction:row;flex:1;justify-content:flex-start;align-items:center}.em-header-right[data-v-454d46e3]{position:absolute;right:0;z-index:10;flex-direction:row;flex:1;justify-content:flex-end;align-items:center}.em-header-btn[data-v-454d46e3]{position:relative;justify-content:center;align-items:center;width:36px;height:36px;border-radius:9px\n  /* 当前元素为overflow: hidden;时在iOS上，外层或同级元素如果是overflow: scroll;切换页面再回到页面，未显示的滚动区域的内容或暂时被高层的内容遮挡会出现被隐藏的情况 */\n  /* overflow: hidden; */}.em-header-left-btn[data-v-454d46e3]{margin-right:16px;\n  /* background-color: #F76842; */transition-property:background-color;transition-duration:.25s}.em-header-right-btn[data-v-454d46e3]{margin-left:16px;\n  /* background-color: #393939; */transition-property:background-color;transition-duration:.25s}.em-header-btn-icon[data-v-454d46e3]{display:flex;align-items:center;font-size:17px;color:#fff}",""]),t.exports=e},"86f4":function(t,e,a){"use strict";a.r(e);var o=a("ec9e"),i=a("04e1");for(var n in i)"default"!==n&&function(t){a.d(e,t,(function(){return i[t]}))}(n);a("239f");var r,s=a("f0c5"),l=Object(s["a"])(i["default"],o["b"],o["c"],!1,null,"454d46e3",null,!1,o["a"],r);e["default"]=l.exports},"8d6a":function(t,e,a){var o=a("0caa");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var i=a("4f06").default;i("fddba372",o,!0,{sourceMap:!1,shadowMode:!1})},"9ca1":function(t,e,a){"use strict";var o=a("da73"),i=a.n(o);i.a},be87:function(t,e,a){var o=a("6163");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var i=a("4f06").default;i("ad5d4a34",o,!0,{sourceMap:!1,shadowMode:!1})},c45c:function(t,e,a){"use strict";a.r(e);var o=a("5bbe"),i=a("d40b");for(var n in i)"default"!==n&&function(t){a.d(e,t,(function(){return i[t]}))}(n);a("9ca1");var r,s=a("f0c5"),l=Object(s["a"])(i["default"],o["b"],o["c"],!1,null,"2a4652ec",null,!1,o["a"],r);e["default"]=l.exports},d0a0:function(t,e,a){"use strict";a.r(e);var o=a("2ed1"),i=a("f51b");for(var n in i)"default"!==n&&function(t){a.d(e,t,(function(){return i[t]}))}(n);a("f6cf");var r,s=a("f0c5"),l=Object(s["a"])(i["default"],o["b"],o["c"],!1,null,"0ab0599f",null,!1,o["a"],r);e["default"]=l.exports},d40b:function(t,e,a){"use strict";a.r(e);var o=a("245e"),i=a.n(o);for(var n in o)"default"!==n&&function(t){a.d(e,t,(function(){return o[t]}))}(n);e["default"]=i.a},da73:function(t,e,a){var o=a("f5b3");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var i=a("4f06").default;i("5eeb21c2",o,!0,{sourceMap:!1,shadowMode:!1})},ec9e:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return o}));var o={emIcon:a("81d3").default},i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"em-header-wrap",style:[{"box-shadow":t.styles.wrap["box-shadow"]}]},[a("v-uni-view",{staticClass:"em-header-bg-wrap",style:[{opacity:t.styles.wrap["opacity"]}]},[a("v-uni-view",{staticClass:"em-header-bg",style:[{"background-color":t.styles.wrap["background-color"]}]})],1),a("v-uni-view",{staticClass:"em-header",style:[{"padding-top":t.styles.wrap["padding-top"],"padding-bottom":t.styles.wrap["padding-bottom"]}]},[a("v-uni-view",{staticClass:"em-header-content",style:[t.styles.content]},[a("v-uni-text",{staticClass:"em-header-title",style:[t.styles.title]},[t._v(t._s(t.title))]),a("v-uni-view",{staticClass:"em-header-left"},[t._l(t.leftBtns,(function(e,o){return a("v-uni-view",{key:o,ref:e.name,refInFor:!0,staticClass:"em-header-btn em-header-left-btn",class:[e.name],style:[e.styles.btn],on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clickBtn("left",o)}}},[a("em-icon",{staticClass:"em-header-btn-icon",style:[e.styles.icon],attrs:{unicode:e.iconUnicode}})],1)})),t._t("left")],2),a("v-uni-view",{staticClass:"em-header-right"},[t._l(t.rightBtns,(function(e,o){return a("v-uni-view",{key:o,ref:e.name,refInFor:!0,staticClass:"em-header-btn em-header-right-btn",class:[e.name],style:[e.styles.btn],on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clickBtn("right",o)}}},[a("em-icon",{staticClass:"em-header-btn-icon",style:[e.styles.icon],attrs:{unicode:e.iconUnicode}})],1)})),t._t("right")],2)],1)],1)],1)},n=[]},f004:function(t,e,a){"use strict";a("4160"),a("b64b"),a("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=function(){var t=uni.getSystemInfoSync(),e={height:36,paddingTop:16,paddingBottom:16};return t.headerStyle=e,t}(),i={name:"em-header",props:{emStyles:{type:Object,default:function(){return{}}},leftBtns:{type:Array,default:function(){return[]}},rightBtns:{type:Array,default:function(){return[]}},title:String},data:function(){return{styles:{wrap:{"background-color":"rgba(0,0,0,0)",opacity:"1","box-shadow":"0 0 4px #E0E0E0","padding-top":"".concat(o.headerStyle.paddingTop,"px"),"padding-bottom":"".concat(o.headerStyle.paddingBottom,"px")},content:{height:"".concat(o.headerStyle.height,"px")},title:{color:"#292929",opacity:"1"}}}},watch:{emStyles:{handler:function(t){var e=this;Object.keys(this.styles).forEach((function(t){var a=e.styles[t],o=e.emStyles[t];o&&"object"===typeof o&&(e.styles[t]=Object.assign(a,o))}))},immediate:!0,deep:!0}},methods:{clickBtn:function(t,e){this.$emit("clickBtn",{position:t,index:e})}}};e.default=i},f51b:function(t,e,a){"use strict";a.r(e);var o=a("f8f4"),i=a.n(o);for(var n in o)"default"!==n&&function(t){a.d(e,t,(function(){return o[t]}))}(n);e["default"]=i.a},f5b3:function(t,e,a){var o=a("24fb");e=o(!1),e.push([t.i,".em-scroller-wrap[data-v-2a4652ec]{\n  /* position: relative; */}\n.em-scroller[data-v-2a4652ec]{position:absolute;top:0;right:0;bottom:0;left:0}",""]),t.exports=e},f6cf:function(t,e,a){"use strict";var o=a("8d6a"),i=a.n(o);i.a},f8f4:function(t,e,a){"use strict";var o=a("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("96cf");var i=o(a("1da1")),n=o(a("5530")),r=a("2f62"),s={};s=getApp({allowDefault:!0});var l={data:function(){return{headerOpacity:0,goods:[],goodsPageIndex:1,loadmoreState:"loadmore",query:{page:0,category_id:-1},category:"",imageUrl:"",category_id:"",products:""}},computed:(0,n.default)((0,n.default)({},(0,r.mapState)(["systemInfo"])),{},{pageStyles:function(){return{wrap:s.$getThemeStyle(["bg-color--1"])}},headerStyles:function(){return{wrap:(0,n.default)((0,n.default)({},s.$getThemeStyle(["bg-color-1",this.headerOpacity>=1?"shadow-1":"shadow-0"])),{},{opacity:this.headerOpacity}),title:(0,n.default)((0,n.default)({},s.$getThemeStyle(["color-1"])),{},{opacity:this.headerOpacity})}},headerLeftBtns:function(){return[{iconUnicode:"",styles:{btn:s.$getThemeStyle(["bg-color-102"]),icon:s.$getThemeStyle(["color-102"])}}]}}),created:function(){this.$em=s.$em},onLoad:function(t){this.category_id=t.id,this.getCategory(t.id),this.getGoodsList(),this.imageUrl=s.$imageUrl},methods:{getCategory:function(t){var e=this;return(0,i.default)(regeneratorRuntime.mark((function a(){var o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,s.$http.get(s.$Api.getCategorById+"?category_id="+t);case 2:o=a.sent,e.category=o.data;case 4:case"end":return a.stop()}}),a)})))()},scroll:function(t){var e=t.scrollTop<=0?0:t.scrollTop,a=(.68*this.systemInfo.windowWidth+this.systemInfo.statusBarHeight)/2,o=e/a,i=o>1?1:o;this.headerOpacity=i,t.scrollBottom<=150&&this.loadmore()},loadmore:function(){"loadmore"===this.loadmoreState&&(console.log("index on loadmore"),this.getGoodsList())},getGoodsList:function(){var t=this;return(0,i.default)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loadmoreState="loading",e.next=3,s.$http.get(s.$Api.getProducts+"?page="+t.query.page+"&category_id="+t.category_id);case 3:if(a=e.sent,console.log(a),t.products=a.data,!t.products.last){e.next=9;break}return t.loadmoreState="nomore",e.abrupt("return");case 9:t.query.page+=1,t.loadmoreState="loadmore";case 11:case"end":return e.stop()}}),e)})))()},clickHeaderBtn:function(t){"left"===t.position&&0===t.index&&s.$navigateBack()}}};e.default=l}}]);