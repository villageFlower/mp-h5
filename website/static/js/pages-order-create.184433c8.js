(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-order-create"],{3161:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".header[data-v-b8fd6f8c]{position:fixed;top:0;left:0;right:0;z-index:101}.header-right[data-v-b8fd6f8c]{position:fixed;flex-direction:row;align-items:center\n    /* margin-left: 18px; */}.header-right-cut[data-v-b8fd6f8c]{\nwidth:28px;\n\n\nmargin:0 5px;border-top-width:1px;border-style:dashed}.header-right-btn[data-v-b8fd6f8c]{position:relative;justify-content:center;align-items:center;width:36px;height:36px;border-radius:9px}.header-right-btn[data-v-b8fd6f8c]{transition-property:background-color;transition-duration:.25s}.header-right-btn-icon[data-v-b8fd6f8c]{display:flex;align-items:center;font-size:17px}.scroller[data-v-b8fd6f8c]{position:absolute;top:%?10?%;left:0;right:0;bottom:0}.panel-header[data-v-b8fd6f8c]{padding:24px 28px}.panel-header-title[data-v-b8fd6f8c]{font-size:21px}.panel-content-wrap[data-v-b8fd6f8c]{border-radius:28px 28px 0 0}.address[data-v-b8fd6f8c]{padding-top:32px}.address-title[data-v-b8fd6f8c]{flex-direction:row;justify-content:space-between;padding:0 28px}.address-title-left[data-v-b8fd6f8c]{font-size:16px;font-weight:700}.address-title-right[data-v-b8fd6f8c]{font-size:14px;font-weight:700;color:#9093a2}.goods-list-item-right[data-v-b8fd6f8c]{padding-right:%?20?%}.address-info[data-v-b8fd6f8c]{flex-direction:row;flex-wrap:wrap;padding:0 28px;margin-top:20px}.address-info-consignee[data-v-b8fd6f8c]{margin-right:10px;font-size:14px}.address-info-mobile[data-v-b8fd6f8c]{margin-right:10px;font-size:14px}.address-info-name[data-v-b8fd6f8c]{font-size:14px}.address-detail[data-v-b8fd6f8c]{padding:0 28px;margin-top:14px}.address-detail-title[data-v-b8fd6f8c]{font-size:14px;font-weight:700}.address-detail-content[data-v-b8fd6f8c]{margin-top:14px;font-size:14px}.address-map-box[data-v-b8fd6f8c]{flex-direction:row;padding:0 28px;margin-top:20px}.address-map-wrap[data-v-b8fd6f8c]{flex:1;flex-direction:row;position:relative}.address-map[data-v-b8fd6f8c]{flex:1;height:120px;border-radius:12px;overflow:hidden}.address-map-cover[data-v-b8fd6f8c]{position:absolute;width:24px;height:24px;border-radius:12px}.address-map-cover-top-left[data-v-b8fd6f8c]{top:0;left:0;box-shadow:-12px -12px 0 0}.address-map-cover-top-right[data-v-b8fd6f8c]{top:0;right:0;box-shadow:12px -12px 0 0}.address-map-cover-bottom-left[data-v-b8fd6f8c]{bottom:0;left:0;box-shadow:-12px 12px 0 0}.address-map-cover-bottom-right[data-v-b8fd6f8c]{bottom:0;right:0;box-shadow:12px 12px 0 0}.goods[data-v-b8fd6f8c]{margin-top:28px;padding:20px 0}.goods-title[data-v-b8fd6f8c]{flex-direction:row;justify-content:space-between;padding:0 28px}.goods-title-left[data-v-b8fd6f8c]{font-size:16px;font-weight:700}.goods-title-right[data-v-b8fd6f8c]{font-size:14px;font-weight:700;color:#9093a2}.goods-list[data-v-b8fd6f8c]{\n    /* margin-top: 20px; */}.goods-list-item[data-v-b8fd6f8c]{flex-direction:row;align-items:center;margin-top:20px;padding:0 28px}.goods-list-item-thumbnail-img[data-v-b8fd6f8c]{width:88px;height:88px;border-radius:12px}.goods-list-item-info[data-v-b8fd6f8c]{margin:0 18px}.goods-list-item-info-top[data-v-b8fd6f8c]{flex-direction:row}.goods-list-item-info-title[data-v-b8fd6f8c]{line-height:19px;font-size:15px;font-weight:700;position:relative;width:%?350?%}.goods-list-item-info-spec[data-v-b8fd6f8c]{margin-left:7px;line-height:19px;font-size:15px;font-weight:700;color:grey}.goods-list-item-info-bottom[data-v-b8fd6f8c]{flex-direction:row;margin-top:10px}.goods-list-item-info-price[data-v-b8fd6f8c]{font-size:13px}.goods-list-item-info-quantity[data-v-b8fd6f8c]{margin-left:7px;font-size:13px;color:grey}.remark[data-v-b8fd6f8c]{padding-top:32px}.remark-title[data-v-b8fd6f8c]{flex-direction:row;justify-content:space-between;padding:0 28px}.remark-left[data-v-b8fd6f8c]{font-size:16px;font-weight:700}.remark-content[data-v-b8fd6f8c]{flex-direction:row;margin-top:20px;padding:0 28px}.remark-text-area-box[data-v-b8fd6f8c]{flex:1;flex-direction:row;padding:12px;border-radius:12px}.remark-text-area[data-v-b8fd6f8c]{flex:1;font-size:14px}.payment[data-v-b8fd6f8c]{padding-top:52px}.payment-title[data-v-b8fd6f8c]{flex-direction:row;justify-content:space-between;padding:0 28px}.payment-left[data-v-b8fd6f8c]{font-size:16px;font-weight:700}.payment-list[data-v-b8fd6f8c]{padding:0 28px 28px 28px}.payment-list-item[data-v-b8fd6f8c]{flex-direction:row;justify-content:space-between;align-items:center;height:84px;padding:0 20px;margin-top:20px;border-radius:12px;background-color:#f7f7f7}.payment-list-item-left[data-v-b8fd6f8c]{flex-direction:row;align-items:center}.payment-list-item-left-icon[data-v-b8fd6f8c]{width:28px;height:28px}.payment-list-item-left-icon-img[data-v-b8fd6f8c]{width:28px;height:28px}.payment-list-item-left-name[data-v-b8fd6f8c]{margin-left:10px;font-size:15px;font-weight:700}.payment-list-item-right-btn[data-v-b8fd6f8c]{flex-direction:row;justify-content:center;align-items:center;width:38px;height:48px;border-radius:12px}.payment-list-item-right-btn-icon[data-v-b8fd6f8c]{font-size:18px}.total[data-v-b8fd6f8c]{padding:0 28px}.total-box[data-v-b8fd6f8c]{flex-direction:row;justify-content:space-between;align-items:flex-end;padding-top:16px;border-top:2px solid #f0f0f0}.total-left-text[data-v-b8fd6f8c]{font-size:15px;line-height:15px}.total-right[data-v-b8fd6f8c]{flex-direction:row;align-items:flex-end}.total-right-symbol[data-v-b8fd6f8c]{font-size:15px;font-weight:700;line-height:15px}.total-right-amount[data-v-b8fd6f8c]{font-size:21px;font-weight:700;line-height:21px}.submit[data-v-b8fd6f8c]{margin-top:32px;padding:28px}.submit-btn[data-v-b8fd6f8c]{flex-direction:row;justify-content:center;align-items:center;height:58px;border-radius:12px}.submit-btn-text[data-v-b8fd6f8c]{font-size:14px;font-weight:700}",""]),t.exports=e},"70df":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}));var a={emPage:i("143c").default,emScroller:i("c45c").default,emHeaderInset:i("a362").default,emNumberBox:i("b8c9").default,emIcon:i("81d3").default,emHeader:i("86f4").default},n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("em-page",{staticClass:"order-create",attrs:{"em-styles":t.pageStyles}},[i("em-scroller",{staticClass:"scroller",style:[t.$em.$getThemeStyle(["bg-color--1"])]},[i("em-header-inset"),i("v-uni-view",{staticClass:"em-panel",style:[t.$em.$getThemeStyle(["bg-color--1"])]},[i("v-uni-view",{staticClass:"em-panel-header panel-header"},[i("v-uni-text",{staticClass:"em-panel-header-title panel-header-title",style:[t.$em.$getThemeStyle(["color-1"])]},[t._v("Confirm Order")])],1)],1),i("v-uni-view",{staticClass:"em-panel panel-content-wrap",style:[t.$em.$getThemeStyle(["bg-color-1"])]},[i("v-uni-view",{staticClass:"em-panel-content"},[i("v-uni-view",{staticClass:"address"},[i("v-uni-view",{staticClass:"address-title"},[i("v-uni-text",{staticClass:"address-title-left",style:[t.$em.$getThemeStyle(["color-1"])]},[t._v("Address")])],1),i("v-uni-view",{staticClass:"address-info"},[i("v-uni-text",{staticClass:"address-info-consignee",style:[t.$em.$getThemeStyle(["color-6"])]},[t._v(t._s(t.defaultAddress.receiver))]),i("v-uni-text",{staticClass:"address-info-mobile",style:[t.$em.$getThemeStyle(["color-6"])]},[t._v(t._s(t.defaultAddress.contact))])],1),i("v-uni-view",{staticClass:"address-detail"},[i("v-uni-text",{staticClass:"address-detail-content",style:[t.$em.$getThemeStyle(["color-6"])]},[t._v(t._s(t.defaultAddress.detail+" S"+t.defaultAddress.postal_code+t.checkLevel()))])],1)],1),i("v-uni-view",{staticClass:"goods"},[i("v-uni-view",{staticClass:"goods-title"},[i("v-uni-text",{staticClass:"goods-title-left",style:[t.$em.$getThemeStyle(["color-1"])]},[t._v("Your order detail")])],1),i("v-uni-view",{staticClass:"goods-list"},[i("v-uni-view",{staticClass:"goods-list-item"},[i("v-uni-view",{staticClass:"goods-list-item-right"},[i("em-number-box",{attrs:{max:t.goodinfo.stock,"em-styles":t.numberBoxStyles,"plus-btn":t.numberBoxPlusBtnStyles,"minus-btn":t.numberBoxMinusBtnStyles,value:t.finalForm.quantity},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.inputNumberBox(e)}}})],1),i("v-uni-view",{staticClass:"goods-list-item-thumbnail"},[i("v-uni-image",{staticClass:"goods-list-item-thumbnail-img",attrs:{src:t.imageUrl+t.goodinfo.images[0].file_path,mode:"aspectFill"}})],1),i("v-uni-view",{staticClass:"goods-list-item-info"},[i("v-uni-view",{staticClass:"goods-list-item-info-top"},[i("v-uni-text",{staticClass:"goods-list-item-info-title",style:[t.$em.$getThemeStyle(["color-1"])]},[t._v(t._s(t.goodinfo.name))])],1),i("v-uni-view",{staticClass:"goods-list-item-info-bottom"},[i("v-uni-text",{staticClass:"goods-list-item-info-price",style:[t.$em.$getThemeStyle(["color-1"])]},[t._v("S$"+t._s(t.goodinfo.price))])],1)],1)],1)],1)],1),i("v-uni-view",{staticClass:"payment"},[i("v-uni-view",{staticClass:"payment-title"},[i("v-uni-text",{staticClass:"payment-left",style:[t.$em.$getThemeStyle(["color-1"])]},[t._v("Payment Method (Skipped in demo)")])],1),i("v-uni-view",{staticClass:"payment-list"},t._l(t.paymentMethod,(function(e,a){return i("v-uni-view",{key:a,staticClass:"payment-list-item",style:[t.$em.$getThemeStyle(["bg-color-2"])]},[i("v-uni-view",{staticClass:"payment-list-item-left"},[i("v-uni-view",{staticClass:"payment-list-item-left-icon"},[i("v-uni-image",{staticClass:"payment-list-item-left-icon-img",attrs:{src:e.iconPath}})],1),i("v-uni-text",{staticClass:"payment-list-item-left-name",style:[t.$em.$getThemeStyle(["color-1"])]},[t._v(t._s(e.name))])],1),i("v-uni-view",{staticClass:"payment-list-item-right"},[i("v-uni-view",{staticClass:"payment-list-item-right-btn",style:[e.checked?t.$em.$getThemeStyle(["bg-color-101"]):t.$em.$getThemeStyle(["bg-color-106"])],on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.selectPaymentMethod(e)}}},[i("em-icon",{staticClass:"payment-list-item-right-btn-icon",style:[e.checked?t.$em.$getThemeStyle(["color-101"]):t.$em.$getThemeStyle(["color-106"])],attrs:{unicode:""}})],1)],1)],1)})),1)],1),i("v-uni-view",{staticClass:"total"},[i("v-uni-view",{staticClass:"total-box",style:[{"border-color":t.$em.$getThemeStyle(["bg-color-2"])["background-color"]}]},[i("v-uni-view",{staticClass:"total-left"},[i("v-uni-text",{staticClass:"total-left-text",style:[t.$em.$getThemeStyle(["color-1"])]},[t._v("Total")])],1),i("v-uni-view",{staticClass:"total-right"},[i("v-uni-text",{staticClass:"total-right-symbol",style:[t.$em.$getThemeStyle(["color-1"])]},[t._v("S$")]),i("v-uni-text",{staticClass:"total-right-amount",style:[t.$em.$getThemeStyle(["color-1"])]},[t._v(t._s(t.finalForm.price))])],1)],1)],1),i("v-uni-view",{staticClass:"submit"},[i("v-uni-view",{staticClass:"submit-btn",style:[t.$em.$getThemeStyle(["bg-color-101"])],on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clickSubmit.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"submit-btn-text",style:[t.$em.$getThemeStyle(["color-101"])]},[t._v("Place Order")])],1)],1)],1)],1)],1),i("em-header",{staticClass:"header",attrs:{"em-styles":t.headerStyles,"left-btns":t.headerLeftBtns},on:{clickBtn:function(e){arguments[0]=e=t.$handleEvent(e),t.clickHeaderBtn.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"header-right",style:[t.headerRight],attrs:{slot:"right"},slot:"right"},[i("v-uni-view",{staticClass:"header-right-btn",style:[t.addressIsValidated?t.$em.$getThemeStyle(["bg-color-101"]):t.$em.$getThemeStyle(["bg-color-105"])]},[i("em-icon",{staticClass:"header-right-btn-icon",style:[t.addressIsValidated?t.$em.$getThemeStyle(["color-101"]):t.$em.$getThemeStyle(["color-105"])],attrs:{unicode:""}})],1),i("v-uni-view",{staticClass:"header-right-cut",style:[t.$em.$getThemeStyle(["bd-color-1"])]}),i("v-uni-view",{staticClass:"header-right-btn",style:[t.$em.$getThemeStyle(["bg-color-105"])]},[i("em-icon",{staticClass:"header-right-btn-icon",style:[t.$em.$getThemeStyle(["color-105"])],attrs:{unicode:""}})],1)],1)],1)],1)},o=[]},"72f3":function(t,e,i){"use strict";i.r(e);var a=i("70df"),n=i("75b1");for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("7467");var s,d=i("f0c5"),r=Object(d["a"])(n["default"],a["b"],a["c"],!1,null,"b8fd6f8c",null,!1,a["a"],s);e["default"]=r.exports},7467:function(t,e,i){"use strict";var a=i("97bf"),n=i.n(a);n.a},"75b1":function(t,e,i){"use strict";i.r(e);var a=i("87e9"),n=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},"87e9":function(t,e,i){"use strict";var a=i("4ea4");i("99af"),i("4de4"),i("4160"),i("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("96cf");var n=a(i("1da1")),o=a(i("5530")),s=i("2f62"),d={};d=getApp({allowDefault:!0});var r={data:function(){return{address:{name:"德润·朗悦湾",province:"云南省",city:"昆明市",country:"五华区",detail:"银河大道与沣源路交汇处(和谐世纪往北200米)"},defaultAddress:"",map:{longitude:102.743655,latitude:25.118518,markers:[{id:1e3,longitude:102.743655,latitude:25.118518,iconPath:"/static/img/user/avatar.jpg@radius.png",width:36,height:36}]},paymentMethod:[{name:"PayNow",iconPath:"/static/img/icon/icon-paynow.png"},{name:"Alipay",iconPath:"/static/img/icon/icon-alipay.png"}],goodinfo:"",imageurl:"",finalForm:{quantity:1,user_id:"",address_id:"",product_id:"",price:""},showModal:!1}},computed:(0,o.default)((0,o.default)({},(0,s.mapState)(["userInfo"])),{},{PLATFORM:function(){var t={H5:"H5",MPWEIXIN:"MP-WEIXIN",APPANDROID:"APP-ANDROID",APPIOS:"APP-IOS"},e="";return e=t.H5,e},pageStyles:function(){return{wrap:d.$getThemeStyle(["bg-color--1"])}},headerStyles:function(){return{wrap:d.$getThemeStyle(["bg-color-1","shadow-1"]),title:d.$getThemeStyle(["color-1"])}},headerLeftBtns:function(){return[{iconUnicode:"",styles:{btn:d.$getThemeStyle(["bg-color-102"]),icon:d.$getThemeStyle(["color-102"])}}]},headerRight:function(){var t=16,e=28;uni.getSystemInfoSync();return{top:"".concat(t,"px"),right:"".concat(e,"px")}},addressIsValidated:function(){for(var t in this.address)if(!this.address[t])return!1;return!0},paymentMethodIsValidated:function(){return this.paymentMethod.filter((function(t){return t.checked})).length>0},numberBoxStyles:function(){return{wrap:d.$getThemeStyle(["bg-color-2"]),input:d.$getThemeStyle(["color-2"])}},numberBoxPlusBtnStyles:function(){return{iconUnicode:"",styles:{icon:d.$getThemeStyle(["color-3"])}}},numberBoxMinusBtnStyles:function(){return{iconUnicode:"",styles:{icon:d.$getThemeStyle(["color-2"])}}}}),created:function(){this.$em=d.$em},onLoad:function(t){this.imageUrl=d.$imageUrl,this.finalForm.product_id=t.product_id},onShow:function(){this.loadData()},methods:{inputNumberBox:function(t){this.finalForm.quantity=t,this.finalForm.price=this.goodinfo.price*t},checkLevel:function(){return this.defaultAddress.level?" #".concat(this.defaultAddress.level,"-").concat(this.defaultAddress.house_no):""},loadData:function(){var t=this;return(0,n.default)(regeneratorRuntime.mark((function e(){var i,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return uni.showLoading({title:"loading..."}),i=uni.getStorageSync("user"),t.finalForm.user_id=i.id,e.next=5,d.$http.get(d.$Api.getDefaultAddress+"?user_id="+t.finalForm.user_id);case 5:if(a=e.sent,404!=a.statusCode){e.next=8;break}return e.abrupt("return",uni.showModal({title:"No Address",content:"Please add one address",confirmText:"Go add",cancelText:"Later",success:function(t){return t.confirm?uni.navigateTo({url:"/pages/address/address"}):uni.navigateBack()}}));case 8:return t.defaultAddress=a.data,t.finalForm.address_id=t.defaultAddress.id,e.next=12,d.$http.get(d.$Api.getProductById+"?id="+t.finalForm.product_id);case 12:n=e.sent,t.goodinfo=n.data,t.finalForm.price=t.goodinfo.price,t.finalForm.product_id=t.goodinfo.id,uni.hideLoading();case 17:case"end":return e.stop()}}),e)})))()},clickSubmit:function(){var t=this;return(0,n.default)(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.paymentMethodIsValidated){e.next=3;break}return uni.showToast({icon:"none",title:"Please select payment method"}),e.abrupt("return");case 3:return console.log(t.finalForm),e.next=6,d.$http.post(d.$Api.orderCommon,t.finalForm);case 6:i=e.sent,200==i.statusCode?d.$redirectTo("/pages/pay/result"):uni.showToast({icon:"error",title:"Server Error"});case 8:case"end":return e.stop()}}),e)})))()},selectPaymentMethod:function(t){var e=this;this.paymentMethod.forEach((function(t){return e.$set(t,"checked",!1)})),t.checked=!0},clickHeaderBtn:function(t){"left"===t.position&&0===t.index&&d.$navigateBack()}}};e.default=r},"97bf":function(t,e,i){var a=i("3161");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("d39092c8",a,!0,{sourceMap:!1,shadowMode:!1})}}]);